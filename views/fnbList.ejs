<div class="container my-1">
  <div class="row">
    <div class="col-md-11 mx-auto">
      <div class="d-flex justify-content-between">
        <div>
          <h3 class="mb-0">Beverages List</h3>
        </div>
        <div></div>
        <div>
          <a href="/fnb/add" type="button" class="btn btn-light px-4">Add</a>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-11 mx-auto">
      <% if (messages) { %>
      <div class="alert alert-dismissible alert-success fade show mb-3">
        <button type="button" class="btn-close" data-mdb-toggle="animation" data-mdb-animation="slide-right" data-mdb-animation-start="onLoad" data-bs-dismiss="alert"></button>
        <strong>Congrats!</strong> <%= messages %>
      </div>
      <% } %> <% if (alert) { %>

      <div class="alert alert-dismissible alert-warning fade show mb-3">
        <button type="button" class="btn-close" data-mdb-toggle="animation" data-mdb-animation="slide-right" data-mdb-animation-start="onLoad" data-bs-dismiss="alert"></button>
        <strong>Oh no!</strong> <%= alert %>
      </div>
      <% } %>
    </div>
  </div>
</div>
<div class="container my-1">
  <div class="row">
    <div class="col-md-11 mx-auto">
      <table class="table table-sm" style="font-size: small">
        <thead>
          <tr class="table-warning">
            <th scope="col">Name</th>
            <th scope="col">Variant</th>
            <th scope="col">Price</th>
            <th scope="col">Created At</th>
            <th scope="col">Updated At</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <% data.forEach((element,i) => { %> <% if (i % 2 === 0) { %>
          <tr class="table-info">
            <th scope="row"><%= element.menu %></th>
            <td><%= element.kind %></td>
            <td><%= Intl.NumberFormat('en-US').format(element.price) %></td>
            <td><%= element.created_at.toLocaleString() %></td>
            <td><%= element.updated_at.toLocaleString() %></td>
            <td class="text-end">
              <button class="border-0 bg-transparent edit-button" data-bs-toggle="modal" data-bs-target="#exampleModal">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 20px">
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M20.8477 1.87868C19.6761 0.707109 17.7766 0.707105 16.605 1.87868L2.44744 16.0363C2.02864 16.4551 1.74317 16.9885 1.62702 17.5692L1.03995 20.5046C0.760062 21.904 1.9939 23.1379 3.39334 22.858L6.32868 22.2709C6.90945 22.1548 7.44285 21.8693 7.86165 21.4505L22.0192 7.29289C23.1908 6.12132 23.1908 4.22183 22.0192 3.05025L20.8477 1.87868ZM18.0192 3.29289C18.4098 2.90237 19.0429 2.90237 19.4335 3.29289L20.605 4.46447C20.9956 4.85499 20.9956 5.48815 20.605 5.87868L17.9334 8.55027L15.3477 5.96448L18.0192 3.29289ZM13.9334 7.3787L3.86165 17.4505C3.72205 17.5901 3.6269 17.7679 3.58818 17.9615L3.00111 20.8968L5.93645 20.3097C6.13004 20.271 6.30784 20.1759 6.44744 20.0363L16.5192 9.96448L13.9334 7.3787Z"
                      fill="#0F0F0F"
                    ></path>
                  </g>
                </svg>
                <input type="hidden" value="<%= element.id %>" />
              </button>
              <a class="confirm-button" href="/fnb/<%= element.id %>/delete" role="button" title="delete" data-confirm="Are you sure to delete this item?">
                <svg width="25px" height="25px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" id="Filled_Line" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <path d="M28,10H4V8c0-0.552,0.448-1,1-1h22c0.552,0,1,0.448,1,1V10z" fill="#F9ED69" id="XMLID_884_" />
                  <path d="M8,7H5C4.448,7,4,7.448,4,8v2h3V8C7,7.448,7.448,7,8,7z" fill="#BBB24F" id="XMLID_394_" />
                  <path d="M27,7h-3c0.552,0,1,0.448,1,1v2h3V8C28,7.448,27.552,7,27,7z" fill="#FBF4A5" id="XMLID_395_" />
                  <path d="M25,10H7v17c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2V10z" fill="#F08A5D" id="XMLID_883_" />
                  <path
                    d="M18.687,24.344c-0.534,0-1.036-0.208-1.414-0.586l-1.586-1.586l-1.586,1.586  c-0.378,0.378-0.88,0.586-1.414,0.586c-0.534,0-1.036-0.208-1.414-0.586s-0.586-0.88-0.586-1.414s0.208-1.036,0.586-1.414  l1.586-1.586l-1.586-1.586c-0.378-0.378-0.586-0.88-0.586-1.414s0.208-1.036,0.586-1.414s0.88-0.586,1.414-0.586  c0.534,0,1.036,0.208,1.414,0.586l1.586,1.586l1.586-1.586c0.378-0.378,0.88-0.586,1.414-0.586c0.534,0,1.036,0.208,1.414,0.586  s0.586,0.88,0.586,1.414s-0.208,1.036-0.586,1.414l-1.586,1.586l1.586,1.586c0.378,0.378,0.586,0.88,0.586,1.414  s-0.208,1.036-0.586,1.414S19.222,24.344,18.687,24.344z"
                    fill="#B46846"
                    id="XMLID_396_"
                  />
                  <path
                    d="M19,24c-0.534,0-1.036-0.208-1.414-0.586L16,21.828l-1.586,1.586  C14.036,23.792,13.534,24,13,24s-1.036-0.208-1.414-0.586S11,22.534,11,22s0.208-1.036,0.586-1.414L13.172,19l-1.586-1.586  C11.208,17.036,11,16.534,11,16s0.208-1.036,0.586-1.414S12.466,14,13,14s1.036,0.208,1.414,0.586L16,16.172l1.586-1.586  C17.964,14.208,18.466,14,19,14s1.036,0.208,1.414,0.586S21,15.466,21,16s-0.208,1.036-0.586,1.414L18.828,19l1.586,1.586  C20.792,20.964,21,21.466,21,22s-0.208,1.036-0.586,1.414S19.534,24,19,24z"
                    fill="#FFFFFF"
                    id="XMLID_397_"
                  />
                  <path d="M23,10v17c0,1.105-0.895,2-2,2h2c1.105,0,2-0.895,2-2V10H23z" fill="#F3A17D" id="XMLID_398_" />
                  <path d="M25,12v-2H7v17c0,1.105,0.895,2,2,2V12H25z" fill="#B46846" id="XMLID_399_" />
                  <path d="  M25,10H7v17c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2V10z" fill="none" id="XMLID_882_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
                  <path d="  M20,7h-8V5c0-1.105,0.895-2,2-2h4c1.105,0,2,0.895,2,2V7z" fill="none" id="XMLID_881_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
                  <path d="  M28,10H4V8c0-0.552,0.448-1,1-1h22c0.552,0,1,0.448,1,1V10z" fill="none" id="XMLID_877_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
                  <path
                    d="M17.414,19l2.293-2.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L16,17.586  l-2.293-2.293c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L14.586,19l-2.293,2.293c-0.391,0.391-0.391,1.023,0,1.414  C12.488,22.902,12.744,23,13,23s0.512-0.098,0.707-0.293L16,20.414l2.293,2.293C18.488,22.902,18.744,23,19,23  s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L17.414,19z"
                    fill="#B83B5E"
                    id="XMLID_430_"
                  />
                  <path d="M19.393,15.638c0.328,0.328,0.378,0.813,0.178,1.204l0.136-0.136  c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0l-0.291,0.291C18.412,15.247,19.01,15.256,19.393,15.638z" fill="#8A2C47" id="XMLID_431_" />
                  <path d="M13.143,15.638l2.388,2.388l0.455-0.455l-2.279-2.279c-0.391-0.391-1.023-0.391-1.414,0  c-0.021,0.021-0.029,0.049-0.048,0.072C12.563,15.314,12.898,15.393,13.143,15.638z" fill="#8A2C47" id="XMLID_432_" />
                  <path d="M17.459,19.045L17.004,19.5l2.389,2.388c0.23,0.23,0.315,0.538,0.285,0.838  c0.009-0.008,0.02-0.011,0.029-0.019c0.391-0.391,0.391-1.023,0-1.414L17.459,19.045z" fill="#8A2C47" id="XMLID_433_" />
                </svg>
              </a>
            </td>
          </tr>
          <% } else { %>
          <tr class="table-light">
            <th scope="row"><%= element.menu %></th>
            <td><%= element.kind %></td>
            <td><%= Intl.NumberFormat('en-US').format(element.price) %></td>
            <td><%= element.created_at.toLocaleString() %></td>
            <td><%= element.updated_at.toLocaleString() %></td>
            <td class="text-end">
              <button class="border-0 bg-transparent edit-button" data-bs-toggle="modal" data-bs-target="#exampleModal">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 20px">
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M20.8477 1.87868C19.6761 0.707109 17.7766 0.707105 16.605 1.87868L2.44744 16.0363C2.02864 16.4551 1.74317 16.9885 1.62702 17.5692L1.03995 20.5046C0.760062 21.904 1.9939 23.1379 3.39334 22.858L6.32868 22.2709C6.90945 22.1548 7.44285 21.8693 7.86165 21.4505L22.0192 7.29289C23.1908 6.12132 23.1908 4.22183 22.0192 3.05025L20.8477 1.87868ZM18.0192 3.29289C18.4098 2.90237 19.0429 2.90237 19.4335 3.29289L20.605 4.46447C20.9956 4.85499 20.9956 5.48815 20.605 5.87868L17.9334 8.55027L15.3477 5.96448L18.0192 3.29289ZM13.9334 7.3787L3.86165 17.4505C3.72205 17.5901 3.6269 17.7679 3.58818 17.9615L3.00111 20.8968L5.93645 20.3097C6.13004 20.271 6.30784 20.1759 6.44744 20.0363L16.5192 9.96448L13.9334 7.3787Z"
                      fill="#0F0F0F"
                    ></path>
                  </g>
                </svg>
                <input type="hidden" value="<%= element.id %>" />
              </button>
              <a class="confirm-button" href="/fnb/<%= element.id %>/delete" role="button" title="delete" data-confirm="Are you sure to delete this item?">
                <svg width="25px" height="25px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" id="Filled_Line" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                  <path d="M28,10H4V8c0-0.552,0.448-1,1-1h22c0.552,0,1,0.448,1,1V10z" fill="#F9ED69" id="XMLID_884_" />
                  <path d="M8,7H5C4.448,7,4,7.448,4,8v2h3V8C7,7.448,7.448,7,8,7z" fill="#BBB24F" id="XMLID_394_" />
                  <path d="M27,7h-3c0.552,0,1,0.448,1,1v2h3V8C28,7.448,27.552,7,27,7z" fill="#FBF4A5" id="XMLID_395_" />
                  <path d="M25,10H7v17c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2V10z" fill="#F08A5D" id="XMLID_883_" />
                  <path
                    d="M18.687,24.344c-0.534,0-1.036-0.208-1.414-0.586l-1.586-1.586l-1.586,1.586  c-0.378,0.378-0.88,0.586-1.414,0.586c-0.534,0-1.036-0.208-1.414-0.586s-0.586-0.88-0.586-1.414s0.208-1.036,0.586-1.414  l1.586-1.586l-1.586-1.586c-0.378-0.378-0.586-0.88-0.586-1.414s0.208-1.036,0.586-1.414s0.88-0.586,1.414-0.586  c0.534,0,1.036,0.208,1.414,0.586l1.586,1.586l1.586-1.586c0.378-0.378,0.88-0.586,1.414-0.586c0.534,0,1.036,0.208,1.414,0.586  s0.586,0.88,0.586,1.414s-0.208,1.036-0.586,1.414l-1.586,1.586l1.586,1.586c0.378,0.378,0.586,0.88,0.586,1.414  s-0.208,1.036-0.586,1.414S19.222,24.344,18.687,24.344z"
                    fill="#B46846"
                    id="XMLID_396_"
                  />
                  <path
                    d="M19,24c-0.534,0-1.036-0.208-1.414-0.586L16,21.828l-1.586,1.586  C14.036,23.792,13.534,24,13,24s-1.036-0.208-1.414-0.586S11,22.534,11,22s0.208-1.036,0.586-1.414L13.172,19l-1.586-1.586  C11.208,17.036,11,16.534,11,16s0.208-1.036,0.586-1.414S12.466,14,13,14s1.036,0.208,1.414,0.586L16,16.172l1.586-1.586  C17.964,14.208,18.466,14,19,14s1.036,0.208,1.414,0.586S21,15.466,21,16s-0.208,1.036-0.586,1.414L18.828,19l1.586,1.586  C20.792,20.964,21,21.466,21,22s-0.208,1.036-0.586,1.414S19.534,24,19,24z"
                    fill="#FFFFFF"
                    id="XMLID_397_"
                  />
                  <path d="M23,10v17c0,1.105-0.895,2-2,2h2c1.105,0,2-0.895,2-2V10H23z" fill="#F3A17D" id="XMLID_398_" />
                  <path d="M25,12v-2H7v17c0,1.105,0.895,2,2,2V12H25z" fill="#B46846" id="XMLID_399_" />
                  <path d="  M25,10H7v17c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2V10z" fill="none" id="XMLID_882_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
                  <path d="  M20,7h-8V5c0-1.105,0.895-2,2-2h4c1.105,0,2,0.895,2,2V7z" fill="none" id="XMLID_881_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
                  <path d="  M28,10H4V8c0-0.552,0.448-1,1-1h22c0.552,0,1,0.448,1,1V10z" fill="none" id="XMLID_877_" stroke="#200F60" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
                  <path
                    d="M17.414,19l2.293-2.293c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L16,17.586  l-2.293-2.293c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L14.586,19l-2.293,2.293c-0.391,0.391-0.391,1.023,0,1.414  C12.488,22.902,12.744,23,13,23s0.512-0.098,0.707-0.293L16,20.414l2.293,2.293C18.488,22.902,18.744,23,19,23  s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L17.414,19z"
                    fill="#B83B5E"
                    id="XMLID_430_"
                  />
                  <path d="M19.393,15.638c0.328,0.328,0.378,0.813,0.178,1.204l0.136-0.136  c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0l-0.291,0.291C18.412,15.247,19.01,15.256,19.393,15.638z" fill="#8A2C47" id="XMLID_431_" />
                  <path d="M13.143,15.638l2.388,2.388l0.455-0.455l-2.279-2.279c-0.391-0.391-1.023-0.391-1.414,0  c-0.021,0.021-0.029,0.049-0.048,0.072C12.563,15.314,12.898,15.393,13.143,15.638z" fill="#8A2C47" id="XMLID_432_" />
                  <path d="M17.459,19.045L17.004,19.5l2.389,2.388c0.23,0.23,0.315,0.538,0.285,0.838  c0.009-0.008,0.02-0.011,0.029-0.019c0.391-0.391,0.391-1.023,0-1.414L17.459,19.045z" fill="#8A2C47" id="XMLID_433_" />
                </svg>
              </a>
            </td>
          </tr>
          <% } %> <% }); %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row my-5 multi-button">
    <div class="col-md-8 mx-auto text-center">
      <a class="button shadow" href="/advanced" role="button">Back</a>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form action="#" method="post">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Edit</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="input-group mb-3">
            <span class="input-group-text" id="menu">Name*</span>
            <input type="text" class="form-control menu" aria-label="menu" aria-describedby="menu" name="menu" />
          </div>

          <div class="input-group mb-3">
            <span class="input-group-text" id="kind">Variant</span>
            <input type="text" class="form-control kind" aria-label="kind" aria-describedby="kind" name="kind" />
          </div>

          <div class="input-group mb-3">
            <span class="input-group-text" id="price">Price*</span>
            <input type="text" class="form-control price" aria-label="price" aria-describedby="price" name="price" />
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save changes</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
  async function fetchMemberData(fnbId) {
    try {
      const data = await fetch(`http://localhost:3000/fnb/${fnbId}`);

      const response = await data.json();

      const menu = document.querySelector('.menu');
      const kind = document.querySelector('.kind');
      const price = document.querySelector('.price');

      const form = document.querySelector('form');

      menu.value = response.menu;
      kind.value = response.kind;
      price.value = response.price;

      form.setAttribute('action', `/fnb/${response.id}`);
    } catch (error) {
      console.log(error);
    }
  }

  const editButtons = document.querySelectorAll('.edit-button');

  editButtons.forEach((editButton) => {
    editButton.addEventListener('click', (e) => {
      const fnbId = editButton.querySelector('input').value;

      // console.log(memberId);
      fetchMemberData(fnbId);
    });
  });
</script>
